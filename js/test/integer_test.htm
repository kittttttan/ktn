<!DOCTYPE html>
<meta charset="UTF-8">
<title>Test integer.js</title>
<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-git.css">
<script src="http://code.jquery.com/qunit/qunit-git.js"></script>
<script src="../lib/ktn.js"></script>
<script src="../lib/integer.js"></script>
<h1 id="qunit-header">Test long.js</h1>
<h2 id="qunit-banner"></h2>
<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup</div>
<script>
var Integer = ktn.Integer;

module("Integer");

test("init", function() {
  equal(Integer.zero().toString(), Integer.str("0").toString(), "0");
  equal(Integer.num(0).toString(), Integer.str("0").toString(), "0");
  equal(true, Integer.str("0").eq(Integer.zero()), "0 == 0");
  
  equal(Integer.num(1).toString(), Integer.str("1").toString(), "1");
  equal(Integer.one().toString(), Integer.str("1").toString(), "1");

  equal(Integer.num(123456789).toString(), Integer.str("123456789").toString(), "123456789");
  equal(Integer.num(2147483647).toString(), Integer.str("2147483647").toString(), "2147483647");
  equal(Integer.num(1234567890).toString(), Integer.str("1234567890").toString(), "1234567890");
  equal(Integer.any(12345678900).toString(), Integer.str("12345678900").toString(), "12345678900");

  equal(Integer.str("1234567", 8).toString(), Integer.num(01234567).toString(), "01234567");
  equal(Integer.str("ffff", 16).toString(), Integer.num(0xffff).toString(), "0xffff");
});

test("basic", function() {
  var a = Integer.str("1234567890"),
      b = Integer.num(10).pow(7);
  equal(a.toString(), "1234567890", "1234567890");
  equal(b.toString(), "10000000", "10000000");
  equal(a.add(b).toString(), "1244567890", "1234567890 + 10000000 = 1244567890");
  equal(a.sub(b).toString(), "1224567890", "1234567890 - 10000000 = 1224567890");
  equal(a.mul(b).toString(), "12345678900000000", "1234567890 x 10000000 = 12345678900000000");
  equal(a.div(b).toString(), "123", "1234567890 / 10000000 = 123");
  equal(a.mod(b).toString(), "4567890", "1234567890 % 10000000 = 4567890");
});

function fib(a) {
  var b = Integer.num(0);
  for (var i = 0, c = Integer.num(1), d; i < a; ++i) {
    d = b.clone();
    b = b.add(c);
    c = d;
  }
  return b;
}

test("fib", function(){
  equal(fib(0).toString(), "0", "fib(0) = 0");
  equal(fib(1).toString(), "1", "fib(1) = 1");
  equal(fib(2).toString(), "1", "fib(2) = 1");
  equal(fib(3).toString(), "2", "fib(3) = 2");
  equal(fib(4).toString(), "3", "fib(4) = 3");
  equal(fib(38).toString(), "39088169", "fib(10) = 39088169");
});

function fact(a) {
  var f = Integer.num(1);
  for (var i = 2; i < a + 1; ++i) {
    f = f.mul(Integer.num(i));
  }
  return f;
}

test("fact", function () {
  equal(fact(0).toString(), "1", "0! = 1");
  equal(fact(1).toString(), "1", "1! = 1");
  equal(fact(2).toString(), "2", "2! = 2");
  equal(fact(3).toString(), "6", "3! = 6");
  equal(fact(10).toString(), "3628800", "10! = 3628800");
});
</script>
